{% extends "base.html" %}

{% block content %}
<div class="appFrameShell">
  <div class="appFrameCard">
    <div class="landing">

      {% set sid = (sample_id or "stark")|lower %}

      <section class="landingHero">
        <div class="heroLine">
          <span class="flourish-left" aria-hidden="true"></span>
          <h1>{{ tagline or "A Living Family Archive." }}</h1>
          <span class="flourish-right" aria-hidden="true"></span>
        </div>

        <p class="landingSub">
          Explore a demo family across the Tree, Timeline, and Map — and see how stories stay connected through time and place.
        </p>
      </section>

      <section class="featureGrid" aria-label="Product previews">

        <!-- TREE -->
        <article class="featureCard">
          <header class="featureHead">
            <h2 class="featureTitle">Family Tree</h2>
            <p class="featureSub">See lineage connections and relationships.</p>
          </header>

          <div class="featurePreview" id="treePreview" aria-label="Tree preview"></div>

          <div class="featureCtaRow">
            <a class="featureCta"
              href="{{ url_for('tree_view') }}"
              data-preserve-sample="1">+ View Full Tree →</a>
          </div>
        </article>

        <!-- TIMELINE -->
        <article class="featureCard">
          <header class="featureHead">
            <h2 class="featureTitle">Timeline</h2>
            <p class="featureSub">Follow events across generations.</p>
          </header>

          <div class="featurePreview" id="timelinePreview" aria-label="Timeline preview"></div>

          <div class="featureCtaRow">
            <a class="featureCta"
              href="{{ url_for('timeline_view') }}"
              data-preserve-sample="1">+ View Full Timeline →</a>
          </div>
        </article>

        <!-- MAP -->
        <article class="featureCard">
          <header class="featureHead">
            <h2 class="featureTitle">Migration Map</h2>
            <p class="featureSub">View locations and clustered family pins.</p>
          </header>

          <div class="featurePreview featurePreview--map" id="mapPreview" aria-label="Map preview"></div>

          <div class="featureCtaRow">
            <a class="featureCta"
              href="{{ url_for('map_view') }}"
              data-preserve-sample="1">+ View Full Map →</a>
          </div>
        </article>

      </section>

      {% if not current_user %}
      <div class="landingAuthWrap">
        {% include "_auth_panel.html" %}
      </div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/landing-previews.js') }}"></script>
{% endblock %}